{% extends 'app_quotes/base.html' %}

{% block title %}
  <title>{{ title }}</title>
{% endblock %}

{% block content %}
  {% if messages %}
    <script>
        {% for message in messages %}
            showToast("{{ message|escapejs }}", "{{ message.tags }}" === "success");
        {% endfor %}
    </script>
  {% endif %}
  <div class="quote-card">
    {% if random_quote %}
      <div class="quote-text">¬´{{ random_quote.text }}¬ª</div>
      <div class="quote-source">‚Äî {{ random_quote.source }}</div>
      <div class="actions">
          <!-- –ö–Ω–æ–ø–∫–∞ –ª–∞–π–∫–∞ -->
          <form method="post" action="{% url 'quotes:rate' random_quote.id %}" style="display: inline;">
              {% csrf_token %}
              <input type="hidden" name="action_type" value="like">
              <button type="submit">üëç: {{ random_quote.like }}</button>
          </form>

          <!-- –ö–Ω–æ–ø–∫–∞ –¥–∏–∑–ª–∞–π–∫–∞ -->
          <form method="post" action="{% url 'quotes:rate' random_quote.id %}" style="display: inline;">
              {% csrf_token %}
              <input type="hidden" name="action_type" value="dislike">
              <button type="submit">üëé: {{ random_quote.dislike }}</button>
          </form>
      </div>
      <div class="counter">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: <span id="views">{{ random_quote.views }}</span></div>
    {% else %}
      <div class="quote-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ü–∏—Ç–∞—Ç</div>
      <div class="quote-source">‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫</div>
      <div class="actions">
        <button id="like">üëç –õ–∞–π–∫</button>
        <button id="dislike">üëé –î–∏–∑–ª–∞–π–∫</button>
      </div>
      <div class="counter">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: <span id="views">0</span></div>
    {% endif %}
    </div>

    <div class="quote-buttons">
      <button id="next-quote-btn" type="button" class="next-quote" onclick="window.location.href='{% url 'quotes:home' %}'">
          –°–ª–µ–¥—É—é—â–∞—è —Ü–∏—Ç–∞—Ç–∞
      </button>

      <button id="add-quote-btn" type="button" class="add-quote" onclick="window.location.href='{% url 'quotes:add_new_quote' %}'">
          –î–æ–±–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É
      </button>

       {% if random_quote %}
           <form method="post" action="{% url 'quotes:del_quote' random_quote.id %}" style="display: inline;">
                {% csrf_token %}
                <button id="del-quote-btn" type="submit" class="del-quote"
                        onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ü–∏—Ç–∞—Ç—É?')">
                    –£–¥–∞–ª–∏—Ç—å —Ü–∏—Ç–∞—Ç—É
                </button>
           </form>

           <button id="edit-quote-btn" type="button" class="edit-quote" onclick="window.location.href='{% url 'quotes:edit_quote' random_quote.id %}'">
                –ò–∑–º–µ–Ω–∏—Ç—å —Ü–∏—Ç–∞—Ç—É
           </button>
       {% endif %}

      <button id="dashboard-btn" type="button" class="dashboard" onclick="window.location.href='{% url 'quotes:dashboard' %}'">
          –î–∞—à–±–æ—Ä–¥
      </button>
    </div>
{% endblock %}